<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
	<title>SCORM Data Model Example</title>
	<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />	
	<link rel="stylesheet" href="../Shared Files/css/style.css" type="text/css" />
	<script type="text/javascript" src="../Shared Files/scripts/dmceFunctions.js"></script>
	<script type="text/javascript" src="../Shared Files/scripts/APIWrapper.js"></script>


	<script type="text/javascript">
		// call to the LMS to get the last interaction index
		questionIndex = retrieveDataValue( "cmi.interactions._count" ) - 1;
		
		//get the id of the question that was answered to display the appropriate feedback
		questionID = retrieveDataValue( "cmi.interactions."+questionIndex+".id" );
		
		//get the result that was stored based on the learner's answer 
		questionResult = retrieveDataValue( "cmi.interactions."+questionIndex+".result" );
		
		// initialize variables to set and use for feedback
		var feedback = "";
		var corFeedback = "";
		var incorFeedback = "";
		var name = retrieveDataValue ( "cmi.learner_name" );
		var split_name = name.split(",");
		var get_uid =  retrieveDataValue ( "cmi.learner_id" );
		var uid = get_uid.split(".");
		var user_response = retrieveDataValue( "cmi.interactions."+questionIndex+".weighting" );
		//var timestamp = retrieveDataValue( "cmi.interactions."+questionIndex+".time" );
		
		
		
		// variable used to set the URL for the next question
		var nextPageURL = "";
		
		// varibale used to set the onUnexpectedExit page number
		var exit = "";
		
		//depending on which question was just answered and passed to the page set and store the appropriate
		//variables
		switch ( questionID ){
			case "interaction_001":
				corFeedback = "Thank you for your feedback!";
				incorFeedback = "Thank you for your feedback!";
				nextPageURL = "cflrn_cc_02.html";
				exit = "01";
				break;
			case "interaction_002":
				corFeedback = "The True/False Interaction Type is a question or statement with two possible responses; the responses can be \"true\" or \"false.\"";
				incorFeedback = "The True/False Interaction Type is a question or statement with two possible responses; the responses can be \"true\" or \"false.\"";		
				nextPageURL = "interactions_cca_question_03.html";
				exit = "02";
				break;
			default:
				corFeedback = "Error.";
				incorFeedback = "Error.";
				nextPageURL = "";
				break;
		}
		
				
		var result = "";
		if( questionResult == "correct" )
		{
			result = "<span style='color:#0099FF;'></span>";
			feedback = corFeedback;
		}
		else
		{
			result = "<span style='color:#0099FF;'></span>";
			feedback = incorFeedback;
		}
	</script>

</head>

<body>
	<div id="wrapper">
		<script type="text/javascript" language="javascript">
		<!--
			loadHeader("Interactions - Conceptual Content Assessment");
		-->
		</script>
		
		<!-- Main page content -->
		<div id="fullScreen">
			<p id="heading">
				<script type="text/javascript">document.writeln( result );</script>
			</p>
		  <div id="content">
				<p><script type="text/javascript">document.writeln( feedback );</script> </p>
				<p><script type="text/javascript">document.writeln( split_name['1']+"<br>"+uid['1']+"<br>"+user_response );</script> </p>
			
			<p>Click <i>Next</i> to continue.</p>
		</div>
	
			<!-- Next button-->		
			<form id="navigation" action="">
				<div id="nextBtn"><input id="nextBtn" style="bottom:5px; right:5px;" type="button" value="Next &gt;&gt;" onclick="javascript:GoToPage( nextPageURL );" /></div>
			</form>	
		</div>
		<!-- end main content -->
	</div>
</body>
</html>

